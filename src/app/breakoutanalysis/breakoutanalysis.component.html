<div *ngIf=" (authState | async).user.isAuthenticated ; else templateNeedLogin" fxFlexAlign="center">
  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Static Breakout Analysis
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div fxLayoutAlign="center center">
        <table mat-table matSort [dataSource]="staticBoxBreakoutDataSource"  >

          <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->

          <!-- Stock Column -->
          <ng-container matColumnDef="stock">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Stock </th>
            <td mat-cell *matCellDef="let element"> <a [routerLink]="['/security/' , element.fullid]"> {{element.stock}} </a></td>
          </ng-container>

          <ng-container matColumnDef="fromdate">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Static Box From  </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.fromdate}} </td>
          </ng-container>

          <ng-container matColumnDef="todate">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Static Box To </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.todate}} </td>
          </ng-container>

          <ng-container matColumnDef="highesthigh">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Static Box High  </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.highesthigh}} </td>
          </ng-container>

          <ng-container matColumnDef="lowestlow">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Static Box Low </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.lowestlow}} </td>
          </ng-container>


          <!-- Last Column -->
          <ng-container matColumnDef="breakoutcompare">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Breakout Percentage </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.breakoutcompare}} </td>
          </ng-container>



          <tr mat-header-row *matHeaderRowDef="staticBreakoutColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: staticBreakoutColumns;"></tr>
        </table>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <mat-accordion>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Dynamic Breakout Analysis
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div fxLayoutAlign="center center">
        <table mat-table matSort  [dataSource]="dynamicBoxBreakoutDataSource"  >

          <!--- Note that these columns can be defined in any order.
                The actual rendered columns are set as a property on the row definition" -->

          <!-- Stock Column -->
          <ng-container matColumnDef="stock">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Stock </th>
            <td mat-cell *matCellDef="let element"> <a [routerLink]="['/security/' , element.fullid]"> {{element.stock}} </a></td>
          </ng-container>

          <ng-container matColumnDef="fromdate">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Dynamic Box From  </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.fromdate}} </td>
          </ng-container>

          <ng-container matColumnDef="todate">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Dynamic Box To </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.todate}} </td>
          </ng-container>

          <ng-container matColumnDef="highesthigh">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Dynamic Box High  </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.highesthigh}} </td>
          </ng-container>

          <ng-container matColumnDef="lowestlow">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Dynamic Box Low </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.lowestlow}} </td>
          </ng-container>


          <!-- Last Column -->
          <ng-container matColumnDef="breakoutcompare">
            <th align="right"  mat-header-cell *matHeaderCellDef mat-sort-header> Breakout Percentage </th>
            <td align="right" mat-cell *matCellDef="let element"> {{element.breakoutcompare}} </td>
          </ng-container>



          <tr mat-header-row *matHeaderRowDef="dynamicBreakoutColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: dynamicBreakoutColumns;"></tr>
        </table>
      </div>
    </mat-expansion-panel>
  </mat-accordion>


</div>

<ng-template #templateNeedLogin>
  <div fxLayout="row" fxLayoutAlign="center center">
    <!--<button mat-button (click)="openDialog()">Sign In</button> or Register for FREE to view Shareholdings details!-->
    <button mat-button routerLink="/login">Sign In</button> or <button mat-button routerLink="/register">Register for FREE</button> to view Breakout Analysis!
  </div>
</ng-template>

